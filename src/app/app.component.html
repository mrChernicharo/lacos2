<nb-layout class="app-container">
  <nb-layout-header class="header-container" fixed>
    <app-header>
      <ng-container *ngIf="user$ | async as user">
        <span class="user-name"> {{ user.nome }}</span>
      </ng-container>
    </app-header>
  </nb-layout-header>

  <nb-layout-column>
    <div class="page-container">
      <!-- ///// -->
      <!-- ROUTER OUTLET -->
      <!-- *ngIf="user$ | async as user; else login" -->
      <!-- <ng-container *ngIf="clientes$ | async as clientes">
        <ng-container *ngIf="consultas$ | async as consultas">
          <ng-container *ngIf="user$ | async as user; else login">

            <router-outlet
              (activate)="onActivate($event, user, clientes, consultas)"
              (deactivate)="onDeactivate($event)"
            ></router-outlet>
          </ng-container>
          <ng-template #login><app-auth></app-auth></ng-template>
        </ng-container>
      </ng-container> -->

      <!-- ///// -->
      <!-- <ng-template #login><app-auth></app-auth></ng-template> -->
      <!-- <router-outlet></router-outlet> -->

      <div class="user-auth-data-container" *ngIf="user$ | async as user">
        <pre>{{ user | json }}</pre>
        <p>criado em {{ user.dataCriacao | date: "short" }}</p>
        <p>Ãºltimo acesso em {{ user.ultimoAcesso | date: "short" }}</p>
      </div>
    </div>

    <ng-container *ngIf="appData$ | async as appData">
      <p>App Data chegando</p>
      <ng-container *ngIf="user$ | async as user; else login">
        <!-- *ngIf="user$ | async as user; else login" -->

        <!-- (activate)="onActivate($event, appData[0], appData[1], appData[2])"
        (deactivate)="onDeactivate($event)" -->
        <router-outlet></router-outlet>
        <!-- ///// -->
      </ng-container>
      <ng-template #login><app-auth></app-auth></ng-template>
    </ng-container>
  </nb-layout-column>

  <nb-layout-footer fixed>
    <!-- Insert footer here -->
  </nb-layout-footer>
</nb-layout>

<!-- <button (click)="authService.signOut()">Sign Out</button> -->
<!-- <ng-template #login>
  <button (click)="authService.googleSignin()">Login com Google</button>
</ng-template> -->
<!-- <div *ngFor="let consulta of consultas">{{ consulta.horario }}</div> -->

<nb-layout class="app-container">
  <nb-layout-header class="header-container" fixed>
    <app-header>
      <ng-container *ngIf="user$ | async as user">
        <span class="user-name"> {{ user.nome }}</span>
      </ng-container>
    </app-header>
  </nb-layout-header>

  <nb-layout-column>
    <div class="page-container">
      <!-- <ng-container *ngIf="clientes$ | async as clientes"></ng-container> -->

      <div class="user-auth-data-container" *ngIf="user$ | async as user">
        <pre>{{ user | json }}</pre>
        <p>criado em {{ user.dataCriacao | date: "short" }}</p>
        <p>último acesso em {{ user.ultimoAcesso | date: "short" }}</p>
      </div>
      <!-- <ng-container *ngIf="consultas$ | async as consultas"
        >consultas na área</ng-container
      > -->
    </div>

    <ng-container *ngIf="user$ | async as user; else login">
      <!--  -->
      <ng-container *ngIf="user.role === 'admin'"
        ><app-dashboard></app-dashboard
      ></ng-container>

      <ng-container *ngIf="user.role === 'profissional'">
        <!-- <app-home [appData$]></app-home> -->

        <ng-container *ngIf="appData$ | async as appData">
          <p>App Data chegando</p>
          <router-outlet></router-outlet>
        </ng-container>
      </ng-container>
    </ng-container>
    <ng-template #login><app-auth></app-auth></ng-template>
  </nb-layout-column>

  <nb-layout-footer fixed>
    <!-- Insert footer here -->
  </nb-layout-footer>
</nb-layout>
<!-- *ngIf="user$ | async as user; else login" -->

<!-- (activate)="onActivate($event, appData[0], appData[1], appData[2])"
        (deactivate)="onDeactivate($event)" -->
<!-- ///// -->
<!-- <button (click)="authService.signOut()">Sign Out</button> -->
<!-- <ng-template #login>
  <button (click)="authService.googleSignin()">Login com Google</button>
</ng-template> -->
<!-- <div *ngFor="let consulta of consultas">{{ consulta.horario }}</div> -->
<!-- ///// -->
<!-- ROUTER OUTLET -->
<!-- *ngIf="user$ | async as user; else login" -->
<!--
          <ng-container *ngIf="user$ | async as user; else login">

            <router-outlet
              (activate)="onActivate($event, user, clientes, consultas)"
              (deactivate)="onDeactivate($event)"
            ></router-outlet>
          </ng-container>
          <ng-template #login><app-auth></app-auth></ng-template>
        </ng-container>
      </ng-container> -->

<!-- ///// -->
<!-- <ng-template #login><app-auth></app-auth></ng-template> -->
<!-- <router-outlet></router-outlet> -->
